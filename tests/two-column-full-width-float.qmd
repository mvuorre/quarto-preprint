---
title: Full width floats in two column Quarto+Typst documents
author:
  - name: Matti Vuorre
    email: mjvuorre@uvt.nl
    orcid: 0000-0001-5052-066X
    url: https://www.tilburguniversity.edu/staff/m-j-vuorre
    # corresponding: true
    affiliation:
      - ref: 1
affiliations:
  - id: 1
    name: Tilburg University
    department: Department of Social Psychology
execute:
  echo: false
  cache: false
functions: place
format:
  preprint-typst:
    keep-typ: true
    columns: 2
    papersize: "us-letter"
    margin:
      x: 2cm
---

Sometimes you want to write a document in two-column mode. Those tend to look pretty nice. However what if you have a really wide table or figure? Here's what you can do to make the figure occupy the entire width of the page.

First, include
```yaml
functions: place
```
in the document's YAML.

Then, wrap your figure in a Quarto div[^fn0] like this:

```
::: {.place arguments='bottom, scope: "parent", float: true'}
<Any content, e.g. code for drawing a figure>
:::
```

The above uses the Typst's `place()`[^fn1] function through the typst-function[^fn2] Quarto extension to place the div's content in `"parent"` scope (the document page is the column's parent) and must specify that Typst should treat the content as a float. The `auto` indicates where the figure should be on the page, and can be either auto, bottom, or top.

::: {.place arguments='auto, scope: "parent", float: true'}
```{r}
#| label: fig-2
#| fig-cap: A figure across columns.
#| fig-width: 7

plot(1:10, 1:10)
```
:::

Although this feels a bit hacky (it's less clean than something like a "`#| scope: parent`" chunk option, which would be nice), it works very well and doesn't affect other formats.

[^fn0]: <https://quarto.org/docs/authoring/markdown-basics.html#sec-divs-and-spans>
[^fn1]: <https://typst.app/docs/reference/layout/place/>
[^fn2]: <https://github.com/christopherkenny/typst-function>
